# Timing Attacks

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}

{% hint style="warning" %}
For obtaining a deep understanding of this technique check the original report from [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)
{% endhint %}

## Basic Information

Osnovni cilj napada vremenskog razmaka je u suštini da se mogu odgovoriti složena pitanja ili otkriti skrivene funkcionalnosti jednostavno **proverom vremenskih razlika u odgovorima na slične zahteve**.

Tradicionalno, ovo je bilo veoma komplikovano zbog latencije i jitter-a koje uvode i mreža i server. Međutim, od otkrića i poboljšanja [**Race Condition Single Packet attack**](race-condition.md#http-2-single-packet-attack-vs.-http-1.1-last-byte-synchronization), moguće je koristiti ovu tehniku da se uklone svi mrežni kašnjenja iz jednačine.\
Ostavljajući samo **kašnjenja servera** čini napad vremenskog razmaka lakšim za otkrivanje i zloupotrebu.

## Discoveries

### Hidden Attack Surface

U blog postu se komentariše kako je korišćenjem ove tehnike bilo moguće pronaći skrivene parametre i čak zaglavlja jednostavno proverom da kada god je parametar ili zaglavlje bilo prisutno u zahtevu, postojala je **vremenska razlika od oko 5ms**. U stvari, ova tehnika otkrivanja je dodata u **Param Miner** u Burp Suite.

Ove vremenske razlike mogu biti rezultat **DNS zahteva**, nekog **logovanja** zbog nevalidnog unosa ili zato što se neki **provere vrše** kada je parametar prisutan u zahtevu.

Nešto što treba da zapamtite kada izvodite ovakve napade je da zbog skrivene prirode površine, možda nećete znati koja je stvarna prava uzrok vremenskih razlika.

### Reverse Proxy Misconfigurations

U istom istraživanju, podeljeno je da je tehnika vremenskog razmaka bila odlična za otkrivanje "scoped SSRFs" (koji su SSRFs koji mogu pristupiti samo dozvoljenim IP/domenima). Jednostavno **proverom vremenske razlike kada je postavljen dozvoljeni domen** u odnosu na kada je postavljen nedozvoljeni domen pomaže u otkrivanju otvorenih proksija čak i ako je odgovor isti.

Kada je otkriven scoped open proxy, bilo je moguće pronaći validne ciljeve parsiranjem poznatih poddomena cilja i to je omogućilo:

* **Zaobilaženje vatrozida** pristupanjem ograničenim poddomenima putem otvorenog proksija umesto putem interneta
* Proverom poddomena čak je bilo moguće otkriti i pristupiti internim poddomenima koja nisu javno poznata
* **Napadi na imitaciju Front-End-a**: Front-end serveri obično dodaju zaglavlja za backend. U otvorenim proksijima, ako uspete da pronađete ova zaglavlja (što možda možete učiniti ponovo koristeći napade vremenskog razmaka), moći ćete da postavite ova zaglavlja i prikupite dalji pristup.

## References

* [https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work](https://portswigger.net/research/listen-to-the-whispers-web-timing-attacks-that-actually-work)

{% hint style="success" %}
Learn & practice AWS Hacking:<img src="../.gitbook/assets/arte.png" alt="" data-size="line">[**HackTricks Training AWS Red Team Expert (ARTE)**](https://training.hacktricks.xyz/courses/arte)<img src="../.gitbook/assets/arte.png" alt="" data-size="line">\
Learn & practice GCP Hacking: <img src="../.gitbook/assets/grte.png" alt="" data-size="line">[**HackTricks Training GCP Red Team Expert (GRTE)**<img src="../.gitbook/assets/grte.png" alt="" data-size="line">](https://training.hacktricks.xyz/courses/grte)

<details>

<summary>Support HackTricks</summary>

* Check the [**subscription plans**](https://github.com/sponsors/carlospolop)!
* **Join the** 💬 [**Discord group**](https://discord.gg/hRep4RUj7f) or the [**telegram group**](https://t.me/peass) or **follow** us on **Twitter** 🐦 [**@hacktricks\_live**](https://twitter.com/hacktricks\_live)**.**
* **Share hacking tricks by submitting PRs to the** [**HackTricks**](https://github.com/carlospolop/hacktricks) and [**HackTricks Cloud**](https://github.com/carlospolop/hacktricks-cloud) github repos.

</details>
{% endhint %}
